<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>
$(document).ready(function(){
	
	$.ajax({ url: "/piccolo/list",async: false,type:"POST",
        context: document.body,
        success: function(data){
           alert(data.query);
        }});
	
    /*$("button").click(function(){
        $.ajax
        ({ url: "/piccolo/list", async: false,type:"POST", success: function(result)
           {
        	
            $("div").html(result.query);
           } 
         }
        );
    });
    */
	  $('#searchNow').click(function(){
 		var uLoc = $('#userLoc').val(); 
		var uEvent = $('#eName').val(); 
		
       	  
		// data: JSON.stringify({ location: uLoc, evenType: uEvent })
	       $.post
	        ({ url: "/piccolo/search", async: false,type:"POST", 
	        	contentType:"application/json",
	        	data: JSON.stringify({ location: uLoc, evenType: uEvent }),
	        	success: function(result)
	           {
	        	
	            alert("search done");
	           } 
	         }
	        );
       
	  
	  });
	  
	  $('#redirect').click(function(){
	 		var uLoc = $('#userLoc').val(); 
			var uEvent = $('#eName').val(); 
			
	        $.post({
	        	  type: "POST",contentType:"application/json",
	        	  url: "/piccolo/searchResult",async: false,
	        	  data: JSON.stringify({ location: uLoc, evenType: uEvent }),
	        	  
	        	  success: function(data) {
	        	    
	        		  $('#stage').load('/piccolo/searchResult');
	        	    
	        	  },
	        	  error : function(){
	        		  alert('some error occured');
	        	  }
	        	});
		  
		  });
});
</script>
</head>
<body>

<div><h2>Let AJAX change this text</h2></div>

<button>Change Content</button>
<input type="text"  name="userLoc" id="userLoc" placeholder="Your Location!">
<input type="text"  name="eName" id="eName" placeholder="Select Event!">

<button type="submit" name="searchNow" id="searchNow" >Find my events</button>

<button type="submit" name="redirect" id="redirect" >Redirect to other page</button>

      <div id = "stage" style = "background-color:cc0;">
         STAGE
      </div>
</body>
</html>

